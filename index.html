<!-- Author: Elijah Newman-Gomez -->
<!DOCTYPE html>
<html lang="en">
<head>
		<title>Intersteller Defense</title>

		<!-- Required by AltOBJMTLLoader.js -->
		<script src="http://sdk.altvr.com/lib/three.min.js"></script>
		<script src="http://sdk.altvr.com/lib/MTLLoader.js"></script>
		<script src="http://sdk.altvr.com/lib/OBJMTLLoader.js"></script>
		<script src="http://sdk.altvr.com/lib/firebase.js"></script>

		<script src="http://sdk.altvr.com/src/AltOBJMTLLoader.js"></script>
		<script src="http://sdk.altvr.com/src/AltRenderer.js"></script>
		<script src="http://sdk.altvr.com/src/cursor/CursorEvents.js"></script>
		<script src="http://sdk.altvr.com/src/cursor/AltObjectControls.js"></script>
		<script src="http://sdk.altvr.com/src/sync/FirebaseSync.js"></script>

		<script src="http://sdk.altvr.com/src/cursor/ColorHoverEffect.js"></script>
		<script src="http://sdk.altvr.com/src/cursor/DragPlaneEffect.js"></script>

		<!--
		<script src="lib/three.min.js"></script>
		<script src="lib/MTLLoader.js"></script>
		<script src="lib/OBJMTLLoader.js"></script>
		<script src="lib/firebase.js"></script>

		<script src="src/AltOBJMTLLoader.js"></script>
		<script src="src/AltRenderer.js"></script>
		<script src="src/cursor/CursorEvents.js"></script>
		<script src="src/cursor/AltObjectControls.js"></script>
		<script src="src/sync/FirebaseSync.js"></script>

		<script src="src/cursor/ColorHoverEffect.js"></script>
		<script src="src/cursor/DragPlaneEffect.js"></script>
		-->

		<style>
			body {
				background-color: rgba(0, 0, 0, 0);
				margin: 0px;
				overflow: hidden;

				color: #FFFFFF;
				font-family: Monospace;
				font-size: 18px;
				text-align: center;
			}
			#info {
				position: absolute;
				top: 0px;
				width: 100%;
				padding: 10px;
			}
		</style>

</head>
<body onselectstart="return false;" ondragstart="return false;">

	<div id="info">
		Intersteller Defense - 
	</div>

	<script src="Actor.js"></script>
	<script src="GameBoard.js"></script>

	<script>
		var inAltspace = !!window.Alt;

		var board = new GameBoard();

		function startGame()
		{
			board.spawnActor({aiClassName: "EnemyShip", modelName: "models/InterD/enemy_ship.obj", offset: new THREE.Vector3(-80, 0, -380), rotation: new THREE.Vector3(0, 0, 0)}).ai.playSequence("entrance0");
			board.spawnActor({aiClassName: "EnemyShip", modelName: "models/InterD/enemy_ship.obj", offset: new THREE.Vector3(-40, 0, -380), rotation: new THREE.Vector3(0, 0, 0)}).ai.playSequence("entrance0");
			board.spawnActor({aiClassName: "EnemyShip", modelName: "models/InterD/enemy_ship.obj", offset: new THREE.Vector3(0, 0, -380), rotation: new THREE.Vector3(0, 0, 0)}).ai.playSequence("entrance0");
			board.spawnActor({aiClassName: "EnemyShip", modelName: "models/InterD/enemy_ship.obj", offset: new THREE.Vector3(40, 0, -380), rotation: new THREE.Vector3(0, 0, 0)}).ai.playSequence("entrance0");
			board.spawnActor({aiClassName: "EnemyShip", modelName: "models/InterD/enemy_ship.obj", offset: new THREE.Vector3(80, 0, -380), rotation: new THREE.Vector3(0, 0, 0)}).ai.playSequence("entrance0");

			var playerParams = {aiClassName: "PlayerTurret", modelName: "models/InterD/player_turret.obj", offset: new THREE.Vector3(0, 0, 0), rotation: new THREE.Vector3(0, 180, 0)};
			var player = board.spawnActor(playerParams);
			board.playerTurret = player;
			//board.setHoloCursorMoveListener(player);
			//setTimeout(function(){ player.sceneObject.translateZ(100); }, 1000);
		}

		document.addEventListener("click", function() {
			board.playerFire();
		}, false);

		setTimeout(function(){ setInterval(function(){ board.playerFire(); }, 800)}, 3000);

		startGame();

		board.loader.load("models/InterD/defense_grid.obj", function ( loadedObject ) {
			loadedObject.position.x = board.boardOffset.x;
			loadedObject.position.y = board.boardOffset.y;
			loadedObject.position.z = board.boardOffset.z + (-200 * board.scaleFactor);

			var scale = new THREE.Vector3( board.scaleFactor, board.scaleFactor, board.scaleFactor);
			if( board.isInAltspace )
				loadedObject.scale.copy( scale );

			board.scene.add(loadedObject);

			board.setHoloCursorMoveListener(loadedObject);
		});

		/*

		board.loader.load("models/InterD/player_turret.obj", function ( loadedObject ) {
			loadedObject.position.x = board.boardOffset.x;
			loadedObject.position.y = board.boardOffset.y;
			loadedObject.position.z = board.boardOffset.z;

			var scale = new THREE.Vector3( board.scaleFactor, board.scaleFactor, board.scaleFactor);
			if( board.isInAltspace )
				loadedObject.scale.copy( scale );

			board.scene.add(loadedObject);
		});
*/

		//setTimeout(function(){board.reset(false); startGame();}, 10000);
	</script>

</body>
</html>